<!doctype html>
<html lang="id">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>KT to TXT Converter | Glassmorphism</title>

        <meta
            name="description"
            content="Convert Kotlin (.kt) source code to text (.txt) files securely in your browser. Multi-language support included."
        />

        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
        <link
            href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap"
            rel="stylesheet"
        />

        <style>
            body {
                font-family: "Outfit", sans-serif;
                background-color: #0f172a;
                overflow: hidden;
            }

            /* Animasi Background Blobs */
            .blob {
                position: absolute;
                filter: blur(80px);
                z-index: -1;
                opacity: 0.6;
                animation: float 10s infinite alternate;
            }
            .blob-1 {
                top: 10%;
                left: 10%;
                width: 300px;
                height: 300px;
                background: #7c3aed;
                border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
            }
            .blob-2 {
                bottom: 20%;
                right: 10%;
                width: 350px;
                height: 350px;
                background: #2563eb;
                border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
                animation-delay: -5s;
            }
            .blob-3 {
                top: 40%;
                left: 40%;
                width: 200px;
                height: 200px;
                background: #ec4899;
                border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
                animation-duration: 15s;
            }
            @keyframes float {
                0% {
                    transform: translate(0, 0) rotate(0deg);
                }
                100% {
                    transform: translate(30px, 50px) rotate(20deg);
                }
            }

            /* Glassmorphism */
            .glass-card {
                background: rgba(255, 255, 255, 0.05);
                backdrop-filter: blur(16px);
                -webkit-backdrop-filter: blur(16px);
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            }

            /* Custom Language Select Style */
            .lang-select {
                appearance: none;
                background-color: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
                color: white;
                padding: 8px 32px 8px 16px;
                border-radius: 12px;
                cursor: pointer;
                font-size: 0.875rem;
                font-weight: 600;
                outline: none;
                transition: all 0.3s ease;
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='white'%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3e%3c/svg%3e");
                background-repeat: no-repeat;
                background-position: right 8px center;
                background-size: 16px;
            }
            .lang-select:hover {
                background-color: rgba(255, 255, 255, 0.2);
                border-color: rgba(167, 139, 250, 0.5);
            }
            .lang-select option {
                background-color: #0f172a; /* Warna gelap untuk dropdown list */
                color: white;
            }

            /* Drop Zone */
            .drop-zone {
                transition: all 0.3s ease;
                background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='16' ry='16' stroke='%23A5B4FC40' stroke-width='2' stroke-dasharray='12%2c 12' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e");
            }
            .drop-zone.active {
                background-color: rgba(99, 102, 241, 0.1);
                transform: scale(1.02);
                background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='16' ry='16' stroke='%23818CF8' stroke-width='3' stroke-dasharray='12%2c 12' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e");
            }
        </style>
    </head>
    <body
        class="h-screen w-full flex items-center justify-center text-white relative"
    >
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>

        <div class="absolute top-6 right-6 z-50">
            <select id="langSelector" class="lang-select">
                <option value="id">ðŸ‡®ðŸ‡© Indonesia</option>
                <option value="en">ðŸ‡ºðŸ‡¸ English</option>
                <option value="ja">ðŸ‡¯ðŸ‡µ æ—¥æœ¬èªž (Japanese)</option>
                <option value="es">ðŸ‡ªðŸ‡¸ EspaÃ±ol</option>
                <option value="pt">ðŸ‡§ðŸ‡· PortuguÃªs</option>
            </select>
        </div>

        <div
            class="glass-card p-10 rounded-3xl w-full max-w-lg mx-4 text-center transform transition-all hover:shadow-[0_0_40px_rgba(124,58,237,0.3)]"
        >
            <div class="mb-8">
                <div
                    class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-tr from-violet-500 to-fuchsia-500 mb-4 shadow-lg"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-8 w-8 text-white"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                        />
                    </svg>
                </div>
                <h1
                    class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-200 via-purple-200 to-pink-200"
                    data-key="title"
                >
                    Kotlin to Text
                </h1>
                <p class="text-slate-400 mt-2 text-sm" data-key="subtitle">
                    Convert .kt files to .txt instantly & securely.
                </p>
            </div>

            <div
                id="dropZone"
                class="drop-zone rounded-2xl p-10 cursor-pointer relative group"
            >
                <input
                    type="file"
                    id="fileInput"
                    accept=".kt"
                    class="hidden"
                    multiple
                />
                <div
                    class="flex flex-col items-center transition-all duration-300 group-hover:-translate-y-1"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-12 w-12 text-slate-400 mb-3 group-hover:text-violet-400 transition-colors"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                        />
                    </svg>
                    <p
                        class="text-lg font-medium text-slate-200"
                        data-key="dragText"
                    >
                        Drag & Drop file .kt
                    </p>
                    <p
                        class="text-xs text-slate-500 mt-1"
                        data-key="browseText"
                    >
                        or click to browse files
                    </p>
                </div>
            </div>

            <div
                id="fileInfo"
                class="hidden mt-6 bg-white/5 rounded-xl p-4 border border-white/10 flex items-center justify-between"
            >
                <div class="flex items-center gap-3">
                    <div
                        class="w-8 h-8 rounded bg-orange-500/20 flex items-center justify-center text-orange-400 font-bold text-xs"
                    >
                        KT
                    </div>
                    <div class="text-left">
                        <p
                            id="fileName"
                            class="text-sm font-semibold text-white truncate max-w-[150px]"
                        >
                            filename.kt
                        </p>
                        <p id="fileSize" class="text-xs text-slate-400">0 KB</p>
                    </div>
                </div>
                <button
                    id="removeFile"
                    class="text-slate-400 hover:text-red-400 transition-colors"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-5 w-5"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                    >
                        <path
                            fill-rule="evenodd"
                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                            clip-rule="evenodd"
                        />
                    </svg>
                </button>
            </div>

            <div class="mt-8 flex flex-col gap-3">
                <button
                    id="zipBtn"
                    class="hidden w-full py-4 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold text-lg shadow-lg shadow-emerald-500/30 transition-all duration-300 hover:scale-[1.02] active:scale-[0.98]"
                    data-key="btnZip"
                >
                    Download .ZIP
                </button>
                <button
                    id="convertBtn"
                    disabled
                    class="w-full py-4 rounded-xl bg-gradient-to-r from-violet-600 to-indigo-600 text-white font-bold text-lg shadow-lg shadow-indigo-500/30 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none transition-all duration-300 hover:scale-[1.02] active:scale-[0.98]"
                    data-key="btnConvert"
                >
                    Convert & Download
                </button>
            </div>

            <p
                id="statusMsg"
                class="mt-4 text-xs text-emerald-400 font-medium h-4 opacity-0 transition-opacity duration-300"
            ></p>
        </div>

        <footer
            class="absolute bottom-4 w-full text-center text-slate-500 text-xs"
        >
            &copy; 2025 KT to TXT Converter. Made with ðŸ’– by
            <a
                href="https://github.com/dfchanelxd"
                class="text-violet-400 hover:text-violet-300 transition-colors font-semibold"
                target="_blank"
                >@dfchanelxd</a
            >.
        </footer>

        <script>
            // --- DATA BAHASA (5 Strategic Languages) ---
            const translations = {
                id: {
                    title: "Konverter KT ke TXT",
                    subtitle: "Ubah file .kt jadi .txt secara instan & aman.",
                    dragText: "Geser & Lepas file .kt",
                    browseText: "atau klik untuk cari file",
                    btnConvert: "Konversi & Unduh",
                    btnZip: "Unduh Arsip .ZIP",
                    alert: "Mohon upload file dengan format .kt",
                    processing: "Memproses...",
                    zipping: "Mengompres...",
                    filesSelected: "File Terpilih",
                    total: "(Total)",
                    downloadIndividual: "Unduh Satu-satu",
                    successSingle: "File berhasil dikonversi!",
                    successMulti: "file berhasil diunduh satu per satu!",
                    successZip: "Sukses! File .ZIP berhasil diunduh.",
                },
                en: {
                    title: "KT to TXT Converter",
                    subtitle: "Convert .kt files to .txt instantly & securely.",
                    dragText: "Drag & Drop .kt file",
                    browseText: "or click to browse files",
                    btnConvert: "Convert & Download",
                    btnZip: "Download .ZIP Archive",
                    alert: "Please upload .kt format files only",
                    processing: "Processing...",
                    zipping: "Zipping...",
                    filesSelected: "Files Selected",
                    total: "(Total)",
                    downloadIndividual: "Download Individually",
                    successSingle: "File converted successfully!",
                    successMulti: "files downloaded individually!",
                    successZip: "Success! .ZIP file downloaded.",
                },
                ja: {
                    title: "KT ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›ãƒ„ãƒ¼ãƒ«",
                    subtitle: ".ktãƒ•ã‚¡ã‚¤ãƒ«ã‚’çž¬æ™‚ã«å®‰å…¨ã«.txtã«å¤‰æ›ã—ã¾ã™ã€‚",
                    dragText: ".ktãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—",
                    browseText: "ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠž",
                    btnConvert: "å¤‰æ›ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
                    btnZip: ".ZIPã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
                    alert: ".ktå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„",
                    processing: "å‡¦ç†ä¸­...",
                    zipping: "åœ§ç¸®ä¸­...",
                    filesSelected: "ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠžä¸­",
                    total: "(åˆè¨ˆ)",
                    downloadIndividual: "å€‹åˆ¥ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
                    successSingle: "å¤‰æ›ã«æˆåŠŸã—ã¾ã—ãŸï¼",
                    successMulti: "å€‹åˆ¥ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸï¼",
                    successZip: "æˆåŠŸï¼.ZIPãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã—ãŸã€‚",
                },
                es: {
                    title: "Convertidor KT a TXT",
                    subtitle:
                        "Convierte archivos .kt a .txt de forma instantÃ¡nea.",
                    dragText: "Arrastra y suelta archivo .kt",
                    browseText: "o haz clic para buscar",
                    btnConvert: "Convertir y Descargar",
                    btnZip: "Descargar Archivo .ZIP",
                    alert: "Por favor sube solo archivos formato .kt",
                    processing: "Procesando...",
                    zipping: "Comprimiendo...",
                    filesSelected: "Archivos Seleccionados",
                    total: "(Total)",
                    downloadIndividual: "Descargar Individualmente",
                    successSingle: "Â¡Archivo convertido con Ã©xito!",
                    successMulti: "archivos descargados individualmente!",
                    successZip: "Â¡Ã‰xito! Archivo .ZIP descargado.",
                },
                pt: {
                    title: "Conversor KT para TXT",
                    subtitle:
                        "Converta arquivos .kt para .txt instantaneamente.",
                    dragText: "Arraste e solte o arquivo .kt",
                    browseText: "ou clique para navegar",
                    btnConvert: "Converter e Baixar",
                    btnZip: "Baixar Arquivo .ZIP",
                    alert: "Por favor, envie apenas arquivos .kt",
                    processing: "Processando...",
                    zipping: "Compactando...",
                    filesSelected: "Arquivos Selecionados",
                    total: "(Total)",
                    downloadIndividual: "Baixar Individualmente",
                    successSingle: "Arquivo convertido com sucesso!",
                    successMulti: "arquivos baixados individualmente!",
                    successZip: "Sucesso! Arquivo .ZIP baixado.",
                },
            };

            // --- STATE VARIABLES ---
            let currentFiles = [];
            let currentLang = localStorage.getItem("user_lang") || "id"; // Default Bahasa Indonesia

            // --- DOM ELEMENTS ---
            const langSelector = document.getElementById("langSelector");
            const dropZone = document.getElementById("dropZone");
            const fileInput = document.getElementById("fileInput");
            const fileInfo = document.getElementById("fileInfo");
            const fileNameDisplay = document.getElementById("fileName");
            const fileSizeDisplay = document.getElementById("fileSize");
            const removeFileBtn = document.getElementById("removeFile");
            const convertBtn = document.getElementById("convertBtn");
            const zipBtn = document.getElementById("zipBtn");
            const statusMsg = document.getElementById("statusMsg");

            // --- INIT LANGUAGE ---
            langSelector.value = currentLang;
            updateLanguage(currentLang);

            langSelector.addEventListener("change", (e) => {
                currentLang = e.target.value;
                localStorage.setItem("user_lang", currentLang);
                updateLanguage(currentLang);
            });

            function updateLanguage(lang) {
                const t = translations[lang];

                // Update Text Statis (Title, Subtitle, dll)
                document.querySelectorAll("[data-key]").forEach((el) => {
                    const key = el.getAttribute("data-key");
                    if (t[key]) el.textContent = t[key];
                });

                // Update Dynamic UI jika ada file yang sedang di-load
                if (currentFiles.length > 0) updateUIButtons();
            }

            // --- DRAG & DROP & INPUT ---
            dropZone.addEventListener("click", () => fileInput.click());
            dropZone.addEventListener("dragover", (e) => {
                e.preventDefault();
                dropZone.classList.add("active");
            });
            dropZone.addEventListener("dragleave", () =>
                dropZone.classList.remove("active"),
            );
            dropZone.addEventListener("drop", (e) => {
                e.preventDefault();
                dropZone.classList.remove("active");
                if (e.dataTransfer.files.length)
                    handleFiles(e.dataTransfer.files);
            });
            fileInput.addEventListener("change", () => {
                if (fileInput.files.length) handleFiles(fileInput.files);
            });

            function handleFiles(files) {
                const t = translations[currentLang];
                const validFiles = Array.from(files).filter((f) =>
                    f.name.endsWith(".kt"),
                );

                if (validFiles.length === 0) {
                    alert(t.alert);
                    return;
                }

                currentFiles = validFiles;
                updateUIButtons();

                dropZone.classList.add("hidden");
                fileInfo.classList.remove("hidden");
                convertBtn.disabled = false;
                statusMsg.style.opacity = "0";
            }

            function updateUIButtons() {
                const t = translations[currentLang];

                if (currentFiles.length === 1) {
                    fileNameDisplay.textContent = currentFiles[0].name;
                    fileSizeDisplay.textContent =
                        (currentFiles[0].size / 1024).toFixed(2) + " KB";
                    convertBtn.textContent = t.btnConvert; // Default Text
                    zipBtn.classList.add("hidden");
                } else {
                    fileNameDisplay.textContent = `${currentFiles.length} ${t.filesSelected}`;
                    const totalSize = currentFiles.reduce(
                        (acc, file) => acc + file.size,
                        0,
                    );
                    fileSizeDisplay.textContent =
                        (totalSize / 1024).toFixed(2) + ` KB ${t.total}`;

                    convertBtn.textContent = `${t.downloadIndividual} (${currentFiles.length})`;
                    zipBtn.textContent = t.btnZip;
                    zipBtn.classList.remove("hidden");
                }
            }

            // --- REMOVE FILE ---
            removeFileBtn.addEventListener("click", () => {
                currentFiles = [];
                fileInput.value = "";
                dropZone.classList.remove("hidden");
                fileInfo.classList.add("hidden");
                convertBtn.disabled = true;
                zipBtn.classList.add("hidden");

                // Reset Text ke default bahasa saat ini
                convertBtn.textContent = translations[currentLang].btnConvert;
                statusMsg.style.opacity = "0";
                statusMsg.textContent = "";
            });

            // --- DOWNLOAD INDIVIDUAL ---
            convertBtn.addEventListener("click", async () => {
                if (!currentFiles.length) return;
                const t = translations[currentLang];

                convertBtn.textContent = t.processing;
                convertBtn.disabled = true;
                zipBtn.disabled = true;

                let processedCount = 0;
                for (const file of currentFiles) {
                    await new Promise((resolve) => {
                        const reader = new FileReader();
                        reader.onload = function (e) {
                            const content = e.target.result;
                            const blob = new Blob([content], {
                                type: "text/plain",
                            });
                            const url = URL.createObjectURL(blob);
                            const a = document.createElement("a");
                            a.href = url;
                            a.download = file.name.replace(".kt", ".txt");
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            URL.revokeObjectURL(url);
                            setTimeout(resolve, 300);
                        };
                        reader.readAsText(file);
                    });
                    processedCount++;
                }
                finishProcess(processedCount, "Individu");
            });

            // --- DOWNLOAD ZIP ---
            zipBtn.addEventListener("click", async () => {
                if (!currentFiles.length) return;
                const t = translations[currentLang];

                zipBtn.textContent = t.zipping;
                convertBtn.disabled = true;
                zipBtn.disabled = true;

                const zip = new JSZip();
                const promises = currentFiles.map((file) => {
                    return new Promise((resolve) => {
                        const reader = new FileReader();
                        reader.onload = function (e) {
                            zip.file(
                                file.name.replace(".kt", ".txt"),
                                e.target.result,
                            );
                            resolve();
                        };
                        reader.readAsText(file);
                    });
                });

                await Promise.all(promises);
                const content = await zip.generateAsync({ type: "blob" });
                const url = URL.createObjectURL(content);
                const a = document.createElement("a");
                a.href = url;
                a.download = "converted_files.zip";
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                finishProcess(currentFiles.length, "ZIP");
            });

            function finishProcess(count, type) {
                const t = translations[currentLang];
                convertBtn.disabled = false;
                zipBtn.disabled = false;
                updateUIButtons();

                statusMsg.textContent =
                    type === "ZIP"
                        ? t.successZip
                        : count > 1
                          ? `${count} ${t.successMulti}`
                          : t.successSingle;

                statusMsg.style.opacity = "1";
            }
        </script>
    </body>
</html>
